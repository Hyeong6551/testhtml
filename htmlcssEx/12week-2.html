<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>고급 모바일 프로그래밍 기초 12-(2)주차</title>
  </head>
  <body>
    <script>
      const xhr = new XMLHttpRequest();
      const URL = 'https:/jsonplaceholder.typicode.com';

      function getData() {
        const xhr = new XMLHttpRequest();
        xhr.open('GET', `${URL}/posts/1`);
        xhr.setRequestHeader('content-type', 'application/json');
        xhr.send();

        xhr.onload = () => {
          if (xhr.status === 200) {
            const res = JSON.parse(xhr.response);
            console.log(res);
            return res;
          } else {
            console.error(xhr.status, xhr.statusText);
            return;
          }
        };
      }
      const res = getData();
      console.log(res);
      console.log('getData 다음 코드를 실행합니다.');

      function getDataPromise() {
        return new Promise((resolve, reject) => {
          xhr.open('GET', `${URL}/posts/1`);
          xhr.setRequestHeader('content-type', 'applicaton/json');
          xhr.send();
          xhr.onload = () => {
            if (xhr.status === 200) {
              const res = JSON.parse(xhr.response);
              resolve(res);
            } else {
              console.error(xhr.status, xhr.statusText);
              reject(new Error(xhr.status));
            }
          };
        });
      }
      getDataPromise().then((res) => {
        console.log(res);
        console.log('getDataPromise 다음 코드를 실행합니다');
      });
    </script>
    <div class="button">
      <button class="prev" type="button" onClick="location.href='12week.html'">
        이전 페이지
      </button>
      <button
        class="next"
        type="button"
        onClick="location.href='./12week-3.html'"
      >
        다음 페이지
      </button>
    </div>
  </body>
</html>
